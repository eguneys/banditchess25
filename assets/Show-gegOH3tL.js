import{m as yt,s as zn,b as S,f as Ht,C as jn,o as In,e as te,t as A,g as Rt,_ as Fn,h as qe,j as Wt,c as b,k as Kt,l as Q,n as Gn,p as zt,q as ie,i as w,r as Se,v as Vn,a as kt,w as Un,x as Ct,u as Yn,y as Zn,S as U,z as Xe,A as Xn,B as Qn,D as Jn,E as er,F as tr,G as nr,H as rr,I as St,J as or,K as ir,L as $t,M as Pt,d as sr,N as lr}from"./index-DyJzR1KP.js";import{M as pe}from"./MeetButton-C11lOxVi.js";import{L as Mt}from"./Leaderboard-CMJChrq1.js";const ar=(e,t)=>{const n=new Map,r=e.ctx();for(const[o,i]of e.allDests(r))if(i.nonEmpty()){const l=Array.from(i,yt);o===r.king&&zn(o)===4&&(i.has(0)?l.push("c1"):i.has(56)&&l.push("c8"),i.has(7)?l.push("g1"):i.has(63)&&l.push("g8")),n.set(yt(o),l)}return n},cr=["white","black"],Te=["a","b","c","d","e","f","g","h"],Ee=["1","2","3","4","5","6","7","8"],dr=[...Ee].reverse(),rt=Array.prototype.concat(...Te.map(e=>Ee.map(t=>e+t))),Y=e=>rt[8*e[0]+e[1]],x=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],jt=rt.map(x);function ur(e){let t;const n=()=>(t===void 0&&(t=e()),t);return n.clear=()=>{t=void 0},n}const fr=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},ot=e=>e==="white"?"black":"white",$e=(e,t)=>{const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},Qe=(e,t)=>e.role===t.role&&e.color===t.color,Pe=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],J=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},It=(e,t,n=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},it=(e,t)=>{e.style.visibility=t?"visible":"hidden"},ge=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},Ft=e=>e.button===2,ne=(e,t)=>{const n=document.createElement(e);return t&&(n.className=t),n};function Gt(e,t,n){const r=x(e);return t||(r[0]=7-r[0],r[1]=7-r[1]),[n.left+n.width*r[0]/8+n.width/16,n.top+n.height*(7-r[1])/8+n.height/16]}const he=(e,t)=>Math.abs(e-t),pr=e=>(t,n,r,o)=>he(t,r)<2&&(e==="white"?o===n+1||n<=1&&o===n+2&&t===r:o===n-1||n>=6&&o===n-2&&t===r),Vt=(e,t,n,r)=>{const o=he(e,n),i=he(t,r);return o===1&&i===2||o===2&&i===1},Ut=(e,t,n,r)=>he(e,n)===he(t,r),Yt=(e,t,n,r)=>e===n||t===r,Zt=(e,t,n,r)=>Ut(e,t,n,r)||Yt(e,t,n,r),hr=(e,t,n)=>(r,o,i,l)=>he(r,i)<2&&he(o,l)<2||n&&o===l&&o===(e==="white"?0:7)&&(r===4&&(i===2&&t.includes(0)||i===6&&t.includes(7))||t.includes(i));function gr(e,t){const n=t==="white"?"1":"8",r=[];for(const[o,i]of e)o[1]===n&&i.color===t&&i.role==="rook"&&r.push(x(o)[0]);return r}function Xt(e,t,n){const r=e.get(t);if(!r)return[];const o=x(t),i=r.role,l=i==="pawn"?pr(r.color):i==="knight"?Vt:i==="bishop"?Ut:i==="rook"?Yt:i==="queen"?Zt:hr(r.color,gr(e,r.color),n);return jt.filter(s=>(o[0]!==s[0]||o[1]!==s[1])&&l(o[0],o[1],s[0],s[1])).map(Y)}function K(e,...t){e&&setTimeout(()=>e(...t),1)}function mr(e){e.orientation=ot(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function vr(e,t){for(const[n,r]of t)r?e.pieces.set(n,r):e.pieces.delete(n)}function _r(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[n,r]of e.pieces)r.role==="king"&&r.color===t&&(e.check=n)}function br(e,t,n,r){le(e),e.premovable.current=[t,n],K(e.premovable.events.set,t,n,r)}function se(e){e.premovable.current&&(e.premovable.current=void 0,K(e.premovable.events.unset))}function wr(e,t,n){se(e),e.predroppable.current={role:t,key:n},K(e.predroppable.events.set,t,n)}function le(e){const t=e.predroppable;t.current&&(t.current=void 0,K(t.events.unset))}function yr(e,t,n){if(!e.autoCastle)return!1;const r=e.pieces.get(t);if(!r||r.role!=="king")return!1;const o=x(t),i=x(n);if(o[1]!==0&&o[1]!==7||o[1]!==i[1])return!1;o[0]===4&&!e.pieces.has(n)&&(i[0]===6?n=Y([7,i[1]]):i[0]===2&&(n=Y([0,i[1]])));const l=e.pieces.get(n);return!l||l.color!==r.color||l.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(n),o[0]<i[0]?(e.pieces.set(Y([6,i[1]]),r),e.pieces.set(Y([5,i[1]]),l)):(e.pieces.set(Y([2,i[1]]),r),e.pieces.set(Y([3,i[1]]),l)),!0)}function Qt(e,t,n){const r=e.pieces.get(t),o=e.pieces.get(n);if(t===n||!r)return!1;const i=o&&o.color!==r.color?o:void 0;return n===e.selected&&Z(e),K(e.events.move,t,n,i),yr(e,t,n)||(e.pieces.set(n,r),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,K(e.events.change),i||!0}function st(e,t,n,r){if(e.pieces.has(n))if(r)e.pieces.delete(n);else return!1;return K(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,K(e.events.change),e.movable.dests=void 0,e.turnColor=ot(e.turnColor),!0}function Jt(e,t,n){const r=Qt(e,t,n);return r&&(e.movable.dests=void 0,e.turnColor=ot(e.turnColor),e.animation.current=void 0),r}function en(e,t,n){if(lt(e,t,n)){const r=Jt(e,t,n);if(r){const o=e.hold.stop();Z(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return r!==!0&&(i.captured=r),K(e.movable.events.after,t,n,i),!0}}else if(Cr(e,t,n))return br(e,t,n,{ctrlKey:e.stats.ctrlKey}),Z(e),!0;return Z(e),!1}function tn(e,t,n,r){const o=e.pieces.get(t);o&&(kr(e,t,n)||r)?(e.pieces.delete(t),st(e,o,n,r),K(e.movable.events.afterNewPiece,o.role,n,{premove:!1,predrop:!1})):o&&Sr(e,t,n)?wr(e,o.role,n):(se(e),le(e)),e.pieces.delete(t),Z(e)}function Je(e,t,n){if(K(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){Z(e),e.hold.cancel();return}else if((e.selectable.enabled||n)&&e.selected!==t&&en(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(rn(e,t)||at(e,t))&&(nn(e,t),e.hold.start())}function nn(e,t){e.selected=t,at(e,t)?e.premovable.customDests||(e.premovable.dests=Xt(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function Z(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function rn(e,t){const n=e.pieces.get(t);return!!n&&(e.movable.color==="both"||e.movable.color===n.color&&e.turnColor===n.color)}const lt=(e,t,n)=>{var r,o;return t!==n&&rn(e,t)&&(e.movable.free||!!(!((o=(r=e.movable.dests)===null||r===void 0?void 0:r.get(t))===null||o===void 0)&&o.includes(n)))};function kr(e,t,n){const r=e.pieces.get(t);return!!r&&(t===n||!e.pieces.has(n))&&(e.movable.color==="both"||e.movable.color===r.color&&e.turnColor===r.color)}function at(e,t){const n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function Cr(e,t,n){var r,o;const i=(o=(r=e.premovable.customDests)===null||r===void 0?void 0:r.get(t))!==null&&o!==void 0?o:Xt(e.pieces,t,e.premovable.castle);return t!==n&&at(e,t)&&i.includes(n)}function Sr(e,t,n){const r=e.pieces.get(t),o=e.pieces.get(n);return!!r&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&(r.role!=="pawn"||n[1]!=="1"&&n[1]!=="8")&&e.movable.color===r.color&&e.turnColor!==r.color}function $r(e,t){const n=e.pieces.get(t);return!!n&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function Pr(e){const t=e.premovable.current;if(!t)return!1;const n=t[0],r=t[1];let o=!1;if(lt(e,n,r)){const i=Jt(e,n,r);if(i){const l={premove:!0};i!==!0&&(l.captured=i),K(e.movable.events.after,n,r,l),o=!0}}return se(e),o}function Mr(e,t){const n=e.predroppable.current;let r=!1;if(!n)return!1;if(t(n)){const o={role:n.role,color:e.movable.color};st(e,o,n.key)&&(K(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),r=!0)}return le(e),r}function ct(e){se(e),le(e),Z(e)}function xt(e){e.movable.color=e.movable.dests=e.animation.current=void 0,ct(e)}function me(e,t,n){let r=Math.floor(8*(e[0]-n.left)/n.width);t||(r=7-r);let o=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(o=7-o),r>=0&&r<8&&o>=0&&o<8?Y([r,o]):void 0}function xr(e,t,n,r){const o=x(e),i=jt.filter(a=>Zt(o[0],o[1],a[0],a[1])||Vt(o[0],o[1],a[0],a[1])),s=i.map(a=>Gt(Y(a),n,r)).map(a=>$e(t,a)),[,d]=s.reduce((a,u,c)=>a[0]<u?a:[u,c],[s[0],0]);return Y(i[d])}const z=e=>e.orientation==="white",on="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Ar={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},qr={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function sn(e){e==="start"&&(e=on);const t=new Map;let n=7,r=0;for(const o of e)switch(o){case" ":case"[":return t;case"/":if(--n,n<0)return t;r=0;break;case"~":{const i=t.get(Y([r-1,n]));i&&(i.promoted=!0);break}default:{const i=o.charCodeAt(0);if(i<57)r+=i-48;else{const l=o.toLowerCase();t.set(Y([r,n]),{role:Ar[l],color:o===l?"black":"white"}),++r}}}return t}function Dr(e){return dr.map(t=>Te.map(n=>{const r=e.get(n+t);if(r){let o=qr[r.role];return r.color==="white"&&(o=o.toUpperCase()),r.promoted&&(o+="~"),o}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function ln(e,t){t.animation&&(dt(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function an(e,t){var n,r,o;if(!((n=t.movable)===null||n===void 0)&&n.dests&&(e.movable.dests=void 0),!((r=t.drawable)===null||r===void 0)&&r.autoShapes&&(e.drawable.autoShapes=[]),dt(e,t),t.fen&&(e.pieces=sn(t.fen),e.drawable.shapes=((o=t.drawable)===null||o===void 0?void 0:o.shapes)||[]),"check"in t&&_r(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&nn(e,e.selected),ln(e,t),!e.movable.rookCastle&&e.movable.dests){const i=e.movable.color==="white"?"1":"8",l="e"+i,s=e.movable.dests.get(l),d=e.pieces.get(l);if(!s||!d||d.role!=="king")return;e.movable.dests.set(l,s.filter(a=>!(a==="a"+i&&s.includes("c"+i))&&!(a==="h"+i&&s.includes("g"+i))))}}function dt(e,t){for(const n in t)n==="__proto__"||n==="constructor"||!Object.prototype.hasOwnProperty.call(t,n)||(Object.prototype.hasOwnProperty.call(e,n)&&At(e[n])&&At(t[n])?dt(e[n],t[n]):e[n]=t[n])}function At(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const fe=(e,t)=>t.animation.enabled?Nr(e,t):oe(e,t);function oe(e,t){const n=e(t);return t.dom.redraw(),n}const Ve=(e,t)=>({key:e,pos:x(e),piece:t}),Tr=(e,t)=>t.sort((n,r)=>$e(e.pos,n.pos)-$e(e.pos,r.pos))[0];function Er(e,t){const n=new Map,r=[],o=new Map,i=[],l=[],s=new Map;let d,a,u;for(const[c,p]of e)s.set(c,Ve(c,p));for(const c of rt)d=t.pieces.get(c),a=s.get(c),d?a?Qe(d,a.piece)||(i.push(a),l.push(Ve(c,d))):l.push(Ve(c,d)):a&&i.push(a);for(const c of l)a=Tr(c,i.filter(p=>Qe(c.piece,p.piece))),a&&(u=[a.pos[0]-c.pos[0],a.pos[1]-c.pos[1]],n.set(c.key,u.concat(u)),r.push(a.key));for(const c of i)r.includes(c.key)||o.set(c.key,c.piece);return{anims:n,fadings:o}}function cn(e,t){const n=e.animation.current;if(n===void 0){e.dom.destroyed||e.dom.redrawNow();return}const r=1-(t-n.start)*n.frequency;if(r<=0)e.animation.current=void 0,e.dom.redrawNow();else{const o=Lr(r);for(const i of n.plan.anims.values())i[2]=i[0]*o,i[3]=i[1]*o;e.dom.redrawNow(!0),requestAnimationFrame((i=performance.now())=>cn(e,i))}}function Nr(e,t){const n=new Map(t.pieces),r=e(t),o=Er(n,t);if(o.anims.size||o.fadings.size){const i=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},i||cn(t,performance.now())}else t.dom.redraw();return r}const Lr=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,Or=["green","red","blue","yellow"];function Br(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?Z(e):ct(e);const n=ge(t),r=me(n,z(e),e.dom.bounds());r&&(e.drawable.current={orig:r,pos:n,brush:Kr(t),snapToValidMove:e.drawable.defaultSnapToValidMove},dn(e))}function dn(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const n=me(t.pos,z(e),e.dom.bounds());n||(t.snapToValidMove=!1);const r=t.snapToValidMove?xr(t.orig,t.pos,z(e),e.dom.bounds()):n;r!==t.mouseSq&&(t.mouseSq=r,t.dest=r!==t.orig?r:void 0,e.dom.redrawNow()),dn(e)}})}function Hr(e,t){e.drawable.current&&(e.drawable.current.pos=ge(t))}function Rr(e){const t=e.drawable.current;t&&(t.mouseSq&&zr(e.drawable,t),un(e))}function un(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function Wr(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),fn(e.drawable))}function Kr(e){var t;const n=(e.shiftKey||e.ctrlKey)&&Ft(e),r=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return Or[(n?1:0)+(r?2:0)]}function zr(e,t){const n=o=>o.orig===t.orig&&o.dest===t.dest,r=e.shapes.find(n);r&&(e.shapes=e.shapes.filter(o=>!n(o))),(!r||r.brush!==t.brush)&&e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),fn(e)}function fn(e){e.onChange&&e.onChange(e.shapes)}function jr(e,t){if(!(e.trustAllEvents||t.isTrusted)||t.buttons!==void 0&&t.buttons>1||t.touches&&t.touches.length>1)return;const n=e.dom.bounds(),r=ge(t),o=me(r,z(e),n);if(!o)return;const i=e.pieces.get(o),l=e.selected;if(!l&&e.drawable.enabled&&(e.drawable.eraseOnClick||!i||i.color!==e.turnColor)&&Wr(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||i||l||Ir(e,r)))t.preventDefault();else if(t.touches)return;const s=!!e.premovable.current,d=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&lt(e,e.selected,o)?fe(c=>Je(c,o),e):Je(e,o);const a=e.selected===o,u=hn(e,o);if(i&&u&&a&&$r(e,o)){e.draggable.current={orig:o,piece:i,origPos:r,pos:r,started:e.draggable.autoDistance&&e.stats.dragged,element:u,previouslySelected:l,originTarget:t.target,keyHasChanged:!1},u.cgDragging=!0,u.classList.add("dragging");const c=e.dom.elements.ghost;c&&(c.className=`ghost ${i.color} ${i.role}`,J(c,Pe(n)(x(o),z(e))),it(c,!0)),ut(e)}else s&&se(e),d&&le(e);e.dom.redraw()}function Ir(e,t){const n=z(e),r=e.dom.bounds(),o=Math.pow(r.width/8,2);for(const i of e.pieces.keys()){const l=Gt(i,n,r);if($e(l,t)<=o)return!0}return!1}function Fr(e,t,n,r){const o="a0";e.pieces.set(o,t),e.dom.redraw();const i=ge(n);e.draggable.current={orig:o,piece:t,origPos:i,pos:i,started:!0,element:()=>hn(e,o),originTarget:n.target,newPiece:!0,force:!!r,keyHasChanged:!1},ut(e)}function ut(e){requestAnimationFrame(()=>{var t;const n=e.draggable.current;if(!n)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(n.orig)&&(e.animation.current=void 0);const r=e.pieces.get(n.orig);if(!r||!Qe(r,n.piece))Ne(e);else if(!n.started&&$e(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if(typeof n.element=="function"){const i=n.element();if(!i)return;i.cgDragging=!0,i.classList.add("dragging"),n.element=i}const o=e.dom.bounds();J(n.element,[n.pos[0]-o.left-o.width/16,n.pos[1]-o.top-o.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==me(n.pos,z(e),o))}ut(e)})}function Gr(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=ge(t))}function Vr(e,t){const n=e.draggable.current;if(!n)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&n.originTarget!==t.target&&!n.newPiece){e.draggable.current=void 0;return}se(e),le(e);const r=ge(t)||n.pos,o=me(r,z(e),e.dom.bounds());o&&n.started&&n.orig!==o?n.newPiece?tn(e,n.orig,o,n.force):(e.stats.ctrlKey=t.ctrlKey,en(e,n.orig,o)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!o&&(e.pieces.delete(n.orig),K(e.events.change)),(n.orig===n.previouslySelected||n.keyHasChanged)&&(n.orig===o||!o)?Z(e):e.selectable.enabled||Z(e),pn(e),e.draggable.current=void 0,e.dom.redraw()}function Ne(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,Z(e),pn(e),e.dom.redraw())}function pn(e){const t=e.dom.elements;t.ghost&&it(t.ghost,!1)}function hn(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&n.tagName==="PIECE")return n;n=n.nextSibling}}function Ur(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{qt(e,2),setTimeout(()=>qt(e,void 0),120)},120)}function qt(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function Yr(e,t){function n(){mr(e),t()}return{set(r){r.orientation&&r.orientation!==e.orientation&&n(),ln(e,r),(r.fen?fe:oe)(o=>an(o,r),e)},state:e,getFen:()=>Dr(e.pieces),toggleOrientation:n,setPieces(r){fe(o=>vr(o,r),e)},selectSquare(r,o){r?fe(i=>Je(i,r,o),e):e.selected&&(Z(e),e.dom.redraw())},move(r,o){fe(i=>Qt(i,r,o),e)},newPiece(r,o){fe(i=>st(i,r,o),e)},playPremove(){if(e.premovable.current){if(fe(Pr,e))return!0;e.dom.redraw()}return!1},playPredrop(r){if(e.predroppable.current){const o=Mr(e,r);return e.dom.redraw(),o}return!1},cancelPremove(){oe(se,e)},cancelPredrop(){oe(le,e)},cancelMove(){oe(r=>{ct(r),Ne(r)},e)},stop(){oe(r=>{xt(r),Ne(r)},e)},explode(r){Ur(e,r)},setAutoShapes(r){oe(o=>o.drawable.autoShapes=r,e)},setShapes(r){oe(o=>o.drawable.shapes=r,e)},getKeyAtDomPos(r){return me(r,z(e),e.dom.bounds())},redrawAll:t,dragNewPiece(r,o,i){Fr(e,r,o,i)},destroy(){xt(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function Zr(){return{pieces:sn(on),orientation:"white",turnColor:"white",coordinates:!0,coordinatesOnSquares:!1,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purple",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},white:{key:"white",color:"white",opacity:1,lineWidth:10}},prevSvgHash:""},hold:fr()}}const Dt={hilitePrimary:{key:"hilitePrimary",color:"#3291ff",opacity:1,lineWidth:1},hiliteWhite:{key:"hiliteWhite",color:"#ffffff",opacity:1,lineWidth:1}};function Xr(){const e=T("defs"),t=B(T("filter"),{id:"cg-filter-blur"});return t.appendChild(B(T("feGaussianBlur"),{stdDeviation:"0.019"})),e.appendChild(t),e}function Qr(e,t,n){var r;const o=e.drawable,i=o.current,l=i&&i.mouseSq?i:void 0,s=new Map,d=e.dom.bounds(),a=o.autoShapes.filter(h=>!h.piece);for(const h of o.shapes.concat(a).concat(l?[l]:[])){if(!h.dest)continue;const _=(r=s.get(h.dest))!==null&&r!==void 0?r:new Set,v=Be(Oe(x(h.orig),e.orientation),d),f=Be(Oe(x(h.dest),e.orientation),d);_.add(tt(v,f)),s.set(h.dest,_)}const u=o.shapes.concat(a).map(h=>({shape:h,current:!1,hash:Tt(h,et(h.dest,s),!1,d)}));l&&u.push({shape:l,current:!0,hash:Tt(l,et(l.dest,s),!0,d)});const c=u.map(h=>h.hash).join(";");if(c===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=c;const p=t.querySelector("defs");Jr(o,u,p),eo(u,t.querySelector("g"),n.querySelector("g"),h=>ro(e,h,o.brushes,s,d))}function Jr(e,t,n){var r;const o=new Map;let i;for(const d of t.filter(a=>a.shape.dest&&a.shape.brush))i=gn(e.brushes[d.shape.brush],d.shape.modifiers),!((r=d.shape.modifiers)===null||r===void 0)&&r.hilite&&o.set(Le(i).key,Le(i)),o.set(i.key,i);const l=new Set;let s=n.firstElementChild;for(;s;)l.add(s.getAttribute("cgKey")),s=s.nextElementSibling;for(const[d,a]of o.entries())l.has(d)||n.appendChild(so(a))}function eo(e,t,n,r){const o=new Map;for(const i of e)o.set(i.hash,!1);for(const i of[t,n]){const l=[];let s=i.firstElementChild,d;for(;s;)d=s.getAttribute("cgHash"),o.has(d)?o.set(d,!0):l.push(s),s=s.nextElementSibling;for(const a of l)i.removeChild(a)}for(const i of e.filter(l=>!o.get(l.hash)))for(const l of r(i))l.isCustom?n.appendChild(l.el):t.appendChild(l.el)}function Tt({orig:e,dest:t,brush:n,piece:r,modifiers:o,customSvg:i,label:l},s,d,a){var u,c;return[a.width,a.height,d,e,t,n,s&&"-",r&&to(r),o&&no(o),i&&`custom-${Et(i.html)},${(c=(u=i.center)===null||u===void 0?void 0:u[0])!==null&&c!==void 0?c:"o"}`,l&&`label-${Et(l.text)}`].filter(p=>p).join(",")}function to(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function no(e){return[e.lineWidth,e.hilite&&"*"].filter(t=>t).join(",")}function Et(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function ro(e,{shape:t,current:n,hash:r},o,i,l){var s,d;const a=Be(Oe(x(t.orig),e.orientation),l),u=t.dest?Be(Oe(x(t.dest),e.orientation),l):a,c=t.brush&&gn(o[t.brush],t.modifiers),p=i.get(t.dest),h=[];if(c){const _=B(T("g"),{cgHash:r});h.push({el:_}),a[0]!==u[0]||a[1]!==u[1]?_.appendChild(io(t,c,a,u,n,et(t.dest,i))):_.appendChild(oo(o[t.brush],a,n,l))}if(t.label){const _=t.label;(s=_.fill)!==null&&s!==void 0||(_.fill=t.brush&&o[t.brush].color);const v=t.brush?void 0:"tr";h.push({el:lo(_,r,a,u,p,v),isCustom:!0})}if(t.customSvg){const _=(d=t.customSvg.center)!==null&&d!==void 0?d:"orig",[v,f]=_==="label"?vn(a,u,p).map(P=>P-.5):_==="dest"?u:a,m=B(T("g"),{transform:`translate(${v},${f})`,cgHash:r});m.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,h.push({el:m,isCustom:!0})}return h}function oo(e,t,n,r){const o=ao(),i=(r.width+r.height)/(4*Math.max(r.width,r.height));return B(T("circle"),{stroke:e.color,"stroke-width":o[n?0:1],fill:"none",opacity:mn(e,n),cx:t[0],cy:t[1],r:i-o[1]/2})}function Le(e){return["#ffffff","#fff","white"].includes(e.color)?Dt.hilitePrimary:Dt.hiliteWhite}function io(e,t,n,r,o,i){var l;function s(u){var c;const p=uo(i&&!o),h=r[0]-n[0],_=r[1]-n[1],v=Math.atan2(_,h),f=Math.cos(v)*p,m=Math.sin(v)*p;return B(T("line"),{stroke:u?Le(t).color:t.color,"stroke-width":co(t,o)+(u?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${u?Le(t).key:t.key})`,opacity:!((c=e.modifiers)===null||c===void 0)&&c.hilite?1:mn(t,o),x1:n[0],y1:n[1],x2:r[0]-f,y2:r[1]-m})}if(!(!((l=e.modifiers)===null||l===void 0)&&l.hilite))return s(!1);const d=T("g"),a=B(T("g"),{filter:"url(#cg-filter-blur)"});return a.appendChild(fo(n,r)),a.appendChild(s(!0)),d.appendChild(a),d.appendChild(s(!1)),d}function so(e){const t=B(T("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key.startsWith("hilite")?1.86:2.05,refY:2});return t.appendChild(B(T("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function lo(e,t,n,r,o,i){var l;const d=.4*.75**e.text.length,a=vn(n,r,o),u=i==="tr"?.4:0,c=B(T("g"),{transform:`translate(${a[0]+u},${a[1]-u})`,cgHash:t});c.appendChild(B(T("circle"),{r:.4/2,"fill-opacity":i?1:.8,"stroke-opacity":i?1:.7,"stroke-width":.03,fill:(l=e.fill)!==null&&l!==void 0?l:"#666",stroke:"white"}));const p=B(T("text"),{"font-size":d,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return p.innerHTML=e.text,c.appendChild(p),c}function Oe(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function et(e,t){return(e&&t.has(e)&&t.get(e).size>1)===!0}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function gn(e,t){return t?{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(n=>n).join("")}:e}function ao(){return[3/64,4/64]}function co(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function mn(e,t){return(e.opacity||1)*(t?.9:1)}function uo(e){return(e?20:10)/64}function Be(e,t){const n=Math.min(1,t.width/t.height),r=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*r]}function fo(e,t){const n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return B(T("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}function tt(e,t,n=!0){const r=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(r*8/Math.PI)+16)%16:r}function po(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((n,r)=>n+r*r,0))}function vn(e,t,n){let r=po(e,t);const o=tt(e,t,!1);if(n&&(r-=33/64,n.size>1)){r-=10/64;const i=tt(e,t);(n.has((i+1)%16)||n.has((i+15)%16))&&i&1&&(r-=.4)}return[e[0]-Math.cos(o)*r,e[1]-Math.sin(o)*r].map(i=>i+.5)}function ho(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const d of cr)e.classList.toggle("orientation-"+d,t.orientation===d);e.classList.toggle("manipulable",!t.viewOnly);const n=ne("cg-container");e.appendChild(n);const r=ne("cg-board");n.appendChild(r);let o,i,l;if(t.drawable.visible&&(o=B(T("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),o.appendChild(Xr()),o.appendChild(T("g")),i=B(T("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),i.appendChild(T("g")),l=ne("cg-auto-pieces"),n.appendChild(o),n.appendChild(i),n.appendChild(l)),t.coordinates){const d=t.orientation==="black"?" black":"",a=t.ranksPosition==="left"?" left":"";if(t.coordinatesOnSquares){const u=t.orientation==="white"?c=>c+1:c=>8-c;Te.forEach((c,p)=>n.appendChild(Ue(Ee.map(h=>c+h),"squares rank"+u(p)+d+a)))}else n.appendChild(Ue(Ee,"ranks"+d+a)),n.appendChild(Ue(Te,"files"+d))}let s;return t.draggable.enabled&&t.draggable.showGhost&&(s=ne("piece","ghost"),it(s,!1),n.appendChild(s)),{board:r,container:n,wrap:e,ghost:s,svg:o,customSvg:i,autoPieces:l}}function Ue(e,t){const n=ne("coords",t);let r;for(const o of e)r=ne("coord"),r.textContent=o,n.appendChild(r);return n}function go(e,t){if(!e.dropmode.active)return;se(e),le(e);const n=e.dropmode.piece;if(n){e.pieces.set("a0",n);const r=ge(t),o=r&&me(r,z(e),e.dom.bounds());o&&tn(e,"a0",o)}e.dom.redraw()}function mo(e,t){const n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",o=>o.preventDefault()),e.viewOnly)return;const r=_o(e);n.addEventListener("touchstart",r,{passive:!1}),n.addEventListener("mousedown",r,{passive:!1})}function vo(e,t){const n=[];if("ResizeObserver"in window||n.push(ye(document.body,"chessground.resize",t)),!e.viewOnly){const r=Nt(e,Gr,Hr),o=Nt(e,Vr,Rr);for(const l of["touchmove","mousemove"])n.push(ye(document,l,r));for(const l of["touchend","mouseup"])n.push(ye(document,l,o));const i=()=>e.dom.bounds.clear();n.push(ye(document,"scroll",i,{capture:!0,passive:!0})),n.push(ye(window,"resize",i,{passive:!0}))}return()=>n.forEach(r=>r())}function ye(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}const _o=e=>t=>{e.draggable.current?Ne(e):e.drawable.current?un(e):t.shiftKey||Ft(t)?e.drawable.enabled&&Br(e,t):e.viewOnly||(e.dropmode.active?go(e,t):jr(e,t))},Nt=(e,t,n)=>r=>{e.drawable.current?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)};function bo(e){const t=z(e),n=Pe(e.dom.bounds()),r=e.dom.elements.board,o=e.pieces,i=e.animation.current,l=i?i.plan.anims:new Map,s=i?i.plan.fadings:new Map,d=e.draggable.current,a=yo(e),u=new Set,c=new Set,p=new Map,h=new Map;let _,v,f,m,P,$,O,y,G,q;for(v=r.firstChild;v;){if(_=v.cgKey,_n(v))if(f=o.get(_),P=l.get(_),$=s.get(_),m=v.cgPiece,v.cgDragging&&(!d||d.orig!==_)&&(v.classList.remove("dragging"),J(v,n(x(_),t)),v.cgDragging=!1),!$&&v.cgFading&&(v.cgFading=!1,v.classList.remove("fading")),f){if(P&&v.cgAnimating&&m===ke(f)){const k=x(_);k[0]+=P[2],k[1]+=P[3],v.classList.add("anim"),J(v,n(k,t))}else v.cgAnimating&&(v.cgAnimating=!1,v.classList.remove("anim"),J(v,n(x(_),t)),e.addPieceZIndex&&(v.style.zIndex=Ye(x(_),t)));m===ke(f)&&(!$||!v.cgFading)?u.add(_):$&&m===ke($)?(v.classList.add("fading"),v.cgFading=!0):Ze(p,m,v)}else Ze(p,m,v);else if(bn(v)){const k=v.className;a.get(_)===k?c.add(_):Ze(h,k,v)}v=v.nextSibling}for(const[k,H]of a)if(!c.has(k)){G=h.get(H),q=G&&G.pop();const L=n(x(k),t);if(q)q.cgKey=k,J(q,L);else{const M=ne("square",H);M.cgKey=k,J(M,L),r.insertBefore(M,r.firstChild)}}for(const[k,H]of o)if(P=l.get(k),!u.has(k))if(O=p.get(ke(H)),y=O&&O.pop(),y){y.cgKey=k,y.cgFading&&(y.classList.remove("fading"),y.cgFading=!1);const L=x(k);e.addPieceZIndex&&(y.style.zIndex=Ye(L,t)),P&&(y.cgAnimating=!0,y.classList.add("anim"),L[0]+=P[2],L[1]+=P[3]),J(y,n(L,t))}else{const L=ke(H),M=ne("piece",L),V=x(k);M.cgPiece=L,M.cgKey=k,P&&(M.cgAnimating=!0,V[0]+=P[2],V[1]+=P[3]),J(M,n(V,t)),e.addPieceZIndex&&(M.style.zIndex=Ye(V,t)),r.appendChild(M)}for(const k of p.values())Ot(e,k);for(const k of h.values())Ot(e,k)}function wo(e){const t=z(e),n=Pe(e.dom.bounds());let r=e.dom.elements.board.firstChild;for(;r;)(_n(r)&&!r.cgAnimating||bn(r))&&J(r,n(x(r.cgKey),t)),r=r.nextSibling}function Lt(e){var t,n;const r=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,i=r.height/r.width,l=Math.floor(r.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,s=l*i;o.style.width=l+"px",o.style.height=s+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("---cg-width",l+"px"),(n=e.addDimensionsCssVarsTo)===null||n===void 0||n.style.setProperty("---cg-height",s+"px")}const _n=e=>e.tagName==="PIECE",bn=e=>e.tagName==="SQUARE";function Ot(e,t){for(const n of t)e.dom.elements.board.removeChild(n)}function Ye(e,t){const r=e[1];return`${t?10-r:3+r}`}const ke=e=>`${e.color} ${e.role}`;function yo(e){var t,n,r;const o=new Map;if(e.lastMove&&e.highlight.lastMove)for(const s of e.lastMove)ee(o,s,"last-move");if(e.check&&e.highlight.check&&ee(o,e.check,"check"),e.selected&&(ee(o,e.selected,"selected"),e.movable.showDests)){const s=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(s)for(const a of s)ee(o,a,"move-dest"+(e.pieces.has(a)?" oc":""));const d=(r=(n=e.premovable.customDests)===null||n===void 0?void 0:n.get(e.selected))!==null&&r!==void 0?r:e.premovable.dests;if(d)for(const a of d)ee(o,a,"premove-dest"+(e.pieces.has(a)?" oc":""))}const i=e.premovable.current;if(i)for(const s of i)ee(o,s,"current-premove");else e.predroppable.current&&ee(o,e.predroppable.current.key,"current-premove");const l=e.exploding;if(l)for(const s of l.keys)ee(o,s,"exploding"+l.stage);return e.highlight.custom&&e.highlight.custom.forEach((s,d)=>{ee(o,d,s)}),o}function ee(e,t,n){const r=e.get(t);r?e.set(t,`${r} ${n}`):e.set(t,n)}function Ze(e,t,n){const r=e.get(t);r?r.push(n):e.set(t,[n])}function ko(e,t,n){const r=new Map,o=[];for(const s of e)r.set(s.hash,!1);let i=t.firstElementChild,l;for(;i;)l=i.getAttribute("cgHash"),r.has(l)?r.set(l,!0):o.push(i),i=i.nextElementSibling;for(const s of o)t.removeChild(s);for(const s of e)r.get(s.hash)||t.appendChild(n(s))}function Co(e,t){const r=e.drawable.autoShapes.filter(o=>o.piece).map(o=>({shape:o,hash:Po(o),current:!1}));ko(r,t,o=>$o(e,o,e.dom.bounds()))}function So(e){var t;const n=z(e),r=Pe(e.dom.bounds());let o=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;o;)It(o,r(x(o.cgKey),n),o.cgScale),o=o.nextSibling}function $o(e,{shape:t,hash:n},r){var o,i,l;const s=t.orig,d=(o=t.piece)===null||o===void 0?void 0:o.role,a=(i=t.piece)===null||i===void 0?void 0:i.color,u=(l=t.piece)===null||l===void 0?void 0:l.scale,c=ne("piece",`${d} ${a}`);return c.setAttribute("cgHash",n),c.cgKey=s,c.cgScale=u,It(c,Pe(r)(x(s),z(e)),u),c}const Po=e=>{var t,n,r;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(n=e.piece)===null||n===void 0?void 0:n.color,(r=e.piece)===null||r===void 0?void 0:r.scale].join(",")};function Mo(e,t){const n=Zr();an(n,t||{});function r(){const o="dom"in n?n.dom.unbind:void 0,i=ho(e,n),l=ur(()=>i.board.getBoundingClientRect()),s=u=>{bo(a),i.autoPieces&&Co(a,i.autoPieces),!u&&i.svg&&Qr(a,i.svg,i.customSvg)},d=()=>{Lt(a),wo(a),i.autoPieces&&So(a)},a=n;return a.dom={elements:i,bounds:l,redraw:xo(s),redrawNow:s,unbind:o},a.drawable.prevSvgHash="",Lt(a),s(!1),mo(a,d),o||(a.dom.unbind=vo(a,d)),a.events.insert&&a.events.insert(i),a}return Yr(r(),r)}function xo(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}function Ao(e){let t=0;return n=>{t+=n.deltaY*(n.deltaMode?40:1),Math.abs(t)>=4?(e(n,!0),t=0):e(n,!1)}}var qo=A('<div class="is2d chessboard"> ');function Do(e){let t,n,r=S(()=>{try{return Ht(e.fen)}catch{return jn.default()}}),o=S(()=>ar(r())),i=S(()=>r().isCheck());return In(()=>{let l=e.color,s=r().isCheck(),d={fen:e.fen,check:s,premovable:{enabled:!1},movable:{color:l,free:!1,dests:o(),events:{after:e.play_orig_key}}};n=Mo(t,d)}),te(()=>{let l;if(e.last_move){let[s]=e.last_move;l=[s.slice(0,2),s.slice(2,4)]}n.set({lastMove:l,fen:e.fen,turnColor:e.color,orientation:e.orientation??"white",check:i(),movable:{color:e.movable?e.color:void 0,dests:o()}})}),te(()=>{n.setAutoShapes(e.shapes??[])}),(()=>{var l=qo();return Rt(s=>t=s,l),l})()}const To=e=>({handleEvent:Eo(e),passive:!1}),Eo=e=>Ao(t=>{const n=t.target;n.tagName!=="PIECE"&&n.tagName!=="SQUARE"&&n.tagName!=="CG-BOARD"||(t.preventDefault(),e(Math.sign(t.deltaY)))});async function No(e){const t=await Lo(e);function n(o){return t.transaction(e.store,o).objectStore(e.store)}function r(o){return new Promise((i,l)=>{const s=o();s.onsuccess=d=>i(d.target.result),s.onerror=d=>l(d.target.result)})}return{list:()=>r(()=>n("readonly").getAllKeys()),get:o=>r(()=>n("readonly").get(o)),getMany:o=>r(()=>n("readonly").getAll(o)),put:(o,i)=>r(()=>n("readwrite").put(i,o)),count:o=>r(()=>n("readonly").count(o)),remove:o=>r(()=>n("readwrite").delete(o)),clear:()=>r(()=>n("readwrite").clear()),cursor:(o,i)=>r(()=>n("readonly").openCursor(o,i)).then(l=>l??void 0),txn:o=>t.transaction(e.store,o)}}async function Lo(e){const t=e?.db||`${e.store}--db`;return new Promise((n,r)=>{const o=window.indexedDB.open(t,e?.version??1);o.onsuccess=i=>n(i.target.result),o.onerror=i=>r(i.target.error??"IndexedDB Unavailable"),o.onupgradeneeded=i=>{const l=i.target.result,s=i.target.transaction,d=l.objectStoreNames.contains(e.store)?s.objectStore(e.store):l.createObjectStore(e.store);e.upgrade?.(i,d)}})}async function Oo(e){let t;await Bo({on_received:i,on_status(f){f&&(f.download&&e.on_downloaded_nb(f.download),f.error&&e.on_engine_failed(f.error))},on_connected(f){t=f}}),n("uci");function n(f){t?.(f)}function r(f){d=f,_()}function o(){return!!s&&!s.stop_requested&&!s.swap_requested}function i(f){const m=f.trim().split(/\s+/g);if(m[0]==="uciok")p("UCI_Chess960","true"),n("ucinewgame"),n("isready");else if(m[0]==="readyok")u();else if(!(m[0]==="id"&&m[1]==="name"))if(m[0]==="bestmove"){s&&a&&s.emit(a),s=void 0,u();return}else if(s&&!s.swap_requested&&!s.stop_requested&&m[0]==="info"){let P=0,$,O=1,y,G,q=!1,k,H=[];for(let D=1;D<m.length;D++)switch(m[D]){case"depth":P=parseInt(m[++D]);break;case"nodes":$=parseInt(m[++D]);break;case"multipv":O=parseInt(m[++D]);break;case"time":y=parseInt(m[++D]);break;case"score":q=m[++D]==="mate",k=parseInt(m[++D]),(m[D+1]==="lowerbound"||m[D+1]==="upperbound")&&(G=m[++D]);break;case"pv":H=m.slice(++D),D=m.length;break}if(q&&!k||(l<O&&(l=O),!qe($)||!qe(y)||!qe(q)||!qe(k)))return;const M=s.ply%2===1?-k:k;if(G&&O===1)return;const V={moves:H,cp:q?void 0:M,mate:q?M:void 0,depth:P};O===1?a={fen:s.current_fen,depth:P,nodes:$,millis:y,cp:q?void 0:M,mate:q?M:void 0,pvs:[V]}:a&&(a.pvs.push(V),a.depth=Math.min(a.depth,P)),O===l&&a&&(s.on_pvs(a),P>=40&&h())}else f&&!["Stockfish","id","option","info"].includes(m[0])&&console.warn(`SF: ${f}`)}let l=0,s,d,a;function u(){if(!s&&(s=d,d=void 0,s)){a=void 0,l=1,p("Threads",s.threads),p("Hash",s.hash_size||16),p("MultiPV",Math.max(1,s.multi_pv)),v&&v!==s.game_id&&n("ucinewgame"),v=s.game_id,n(["position fen",s.initial_fen,"moves",s.moves].join(" "));const[f,m]=Object.entries(s.search)[0];n(`go ${f} ${m}`)}}let c=new Map([["Threads","1"],["Hash","16"],["MultiPV","1"],["UCI_Variant","chess"]]);function p(f,m){m=m.toString(),c.get(f)!==m&&(n(`setoption name ${f} value ${m}`),c.set(f,m))}function h(){s&&!s.stop_requested&&(s.stop_requested=!0,n("stop"))}function _(){s&&!s.swap_requested&&(s.swap_requested=!0,n("stop")),n("isready")}let v;return{start(f){r(f)},stop(){r()},destroy(){n("quit")},get state(){return o()?"computing":"idle"}}}async function Bo(e){const t=c=>{e.on_status(c)},n=c=>{e.on_received(c)},r=c=>{e.on_connected(c)};let o=await Fn(()=>import("./sf171-79-CuIQKt_o.js"),[]),i=await new Promise((c,p)=>{o.default({wasmMemory:Ho(2560),onError:h=>p(new Error(h)),locateFile:h=>`stockfish/${h}`}).then(c).catch(p)}),l=await No({store:".banditchess.nnue"}).catch(()=>{}),s=[];for(let c=0;;c++){let p=i.getRecommendedNnue(c);if(!p||s.includes(p))break;s.push(p)}(await a(s)).forEach((c,p)=>i.setNnueBuffer(c,p)),i.onError=u(),i.listen=c=>n(c),r(c=>i.uci(c));async function a(c){return Promise.all(c.map(async p=>{let h=await l?.get(p).catch(()=>{});if(h&&h.byteLength>128*1024)return h;const _=new XMLHttpRequest;_.open("get",`stockfish/nnue/${p}`,!0),_.responseType="arraybuffer",_.onprogress=f=>t({download:{bytes:f.loaded,total:f.total}});const v=await new Promise((f,m)=>{_.onerror=()=>m(new Error(`fetch '${p}' failed: ${_.status}`)),_.onload=()=>{_.status/100===2?f(new Uint8Array(_.response)):m(new Error(`fetch '${p}' failed: ${_.status}`))},_.send()});return t(),l?.put(p,v).catch(()=>console.warn("IDB store failed")),v}))}function u(){return c=>{if(c.startsWith("BAD_NNUE")&&l){const p=Math.max(0,Number(c.slice(9))),h=i.getRecommendedNnue(p);setTimeout(()=>{console.warn(`Corrupt NNUE file, removing ${h} from IDB`),l.remove(h)},2e3)}else t({error:c})}}}const Ho=(e,t=32767)=>{let n=4;for(;;)try{return new WebAssembly.Memory({shared:!0,initial:e,maximum:t})}catch(r){if(t<=e||!(r instanceof RangeError))throw r;t=Math.max(e,Math.ceil(t-t/n)),n=n===4?3:4}};function Ro(e){let t,n;return function(...r){const o=this,i=()=>{n=void 0,t=e.apply(o,r).finally(()=>{t=void 0,n&&n()})};t?n=i:i()}}function Wo(e,t){return Ro(function(...n){return t.apply(this,n),new Promise(r=>setTimeout(r,e))})}const Ko=(()=>{let e=0;return()=>`${e++}`})();function zo(){let[e,t]=Q(void 0),[n,r]=Q(void 0),o=Gn(()=>Oo({on_downloaded_nb(i){t(i)},on_engine_failed(i){r(i)}}));return{get downloaded_nb(){return e()},get engine_failed(){return n()},get protocol(){return o()}}}function jo(e,t){let n,r=10,o=7,i=0,l=Math.max(1,navigator.hardwareConcurrency-2),s=256,d=Ko();return e.start({threads:l,hash_size:s,game_id:d,stop_requested:!1,swap_requested:!1,path:[],search:{depth:r},multi_pv:o,ply:i,threatMode:!1,initial_fen:t,current_fen:t,moves:[],emit:function(a){n(a.pvs.map(u=>({uci:u.moves[0],cp:u.cp,mate:u.mate})))},on_pvs:Wo(200,function(a){})}),new Promise(a=>{n=a})}function Io(e){let t=zo(),n={},[r,o]=Wt({get downloaded_nb(){return t.downloaded_nb},get engine_failed(){return t.engine_failed},pvs:n}),i=!1,l=[];function s(){if(!t.protocol||i)return;let u=l.shift();u&&(i=!0,jo(t.protocol,u).then(c=>{o("pvs",u,c),i=!1,s()}))}te(ie(()=>t.protocol,s));let a=[r,{request_multipv(u){l.push(u),s()}}];return b(wn.Provider,{value:a,get children(){return e.children}})}const wn=Kt();function Fo(){return zt(wn)}const Go=(e=0)=>()=>{var t=Math.sin(e++)*1e4;return t-Math.floor(t)},yn=Go();function kn(e=yn){return e()<.5?-1:1}function Vo(e,t,n=yn){return Math.floor(n()*(t-e)+e)}function Ce(e){return e[Vo(0,e.length)]}var Uo=A("<section class=sliced-text> <!> "),Yo=A("<div class=aurora-text><div class=title><div class=aurora><div class=aurora__item></div><div class=aurora__item></div><div class=aurora__item></div><div class=aurora__item>"),Zo=A("<div class=marquee> <span></span> ");function Xo(e){return(()=>{var t=Uo(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,w(t,()=>e.text,r),Se(()=>Vn(t,"data-heading",e.text)),t})()}function Qo(e){return(()=>{var t=Yo(),n=t.firstChild,r=n.firstChild;return w(n,()=>e.text,r),t})()}function nt(e){return(()=>{var t=Zo(),n=t.firstChild,r=n.nextSibling;return w(r,()=>e.text),t})()}async function De(e,t){const n=await fetch(t).then(o=>o.arrayBuffer());return await e.decodeAudioData(n)}function Jo(){let e=new AudioContext,t={};async function n(){t.hit0=await De(e,"./audio/hit0.mp3"),t.hit3=await De(e,"./audio/hit3.mp3"),t.hit6=await De(e,"./audio/hit6.wav"),t.hit5=await De(e,"./audio/hit5.wav")}function r(o,i=!1,l=.5){let s=t[o];const d=e.createBufferSource();d.buffer=s;let a=e.createGain();return a.gain.value=l,a.connect(e.destination),d.connect(a),d.loop=i,d.start(),()=>{d.stop()}}return{load:n,play:r,buffers:t}}function ei(e){let t=Jo();return t.load(),b(Cn.Provider,{value:t,get children(){return e.children}})}const Cn=Kt();function ti(){return zt(Cn)}var ni=A("<div class=modal-overlay><div class=modal><div class=game-over-popup><h2>New High Score</h2><div class=leaderboards>"),ri=A('<main class=vs><div class=background><div class=p1></div><div class=p2></div></div><div class=content><div class=info><h3>Bandit vs Stockfish</h3><span>Match #</span></div><div class=board-wrap><div class=board></div></div><div class=replay-wrap><div class=top-padding></div><div class=user-top><span class="user ai">Stockfish</span><span class=time>0:00</span></div><div class=replay><div class=scores></div></div><div class=controls></div><div class=user-bottom><span class=user>You</span><span class=time>0:00</span></div><div class=bottom-padding></div></div><div class=history>'),oi=A("<div class=downloading><span>Downloading Stockfish..</span><div class=bar>"),ii=A('<input type=text placeholder="Enter Your Handle"maxlength=8 minlength=3>'),si=A("<div class=high-score-review><div class=buttons>"),li=A("<small>Don't Show Again"),ai=A("<div class=feedback><p>Did you like Bandit Chess?</p><div class=buttons>"),ci=A("<div class=note><div class=marquee> <span>Personal Best Achieved.</span> "),di=A("<div class=note2>"),ui=A("<div class=win><span class=header></span><div class=scores><span class=score>Score: </span><span class=combo>Combo: "),fi=A("<div class=result><span class=over>Game Over</span><small>"),pi=A("<div class=lose><span class=header>"),hi=A("<div class=score-delta><span class=score></span><div class=combo-streak><span class=streak>x</span><span class=combo>"),gi=A("<div class=list-wrap><div class=list><div class=padding>"),mi=A("<div class=padding>"),vi=A("<span class=step> <!> <span class=delta> </span> ");const _i=".banditchess.vs-stockfish-save.v0";function Di(){return b(ei,{get children(){return b(Io,{get children(){return b(bi,{})}})}})}function bi(){let[e,{request_multipv:t}]=Fo();const n=()=>e.downloaded_nb,r=()=>e.engine_failed,o=S(()=>{let g=n();if(g){let C=Math.round(g.bytes/(g.total===0?74874478:g.total)*100);return C===100?void 0:C}});console.log(r());let[i,{initialize_replay:l,add_uci_and_goto_it:s,set_cursor_path:d,goto_next_path_if_can:a,goto_prev_path_if_can:u,submit_vote:c}]=kt();const[p,h]=Un(Wt({color:kn()?"white":"black",nth:1,sans:[],cursor_path:"",game_result:void 0,fen_pvs:{},show_vote:!0}),{name:_i}),_=()=>p.nth;function v(g){h("sans",p.sans.length,g.san),h("cursor_path",g.path)}const f=()=>p.color,m=()=>$t(f()),P=S(()=>i.replay.list),$=S(()=>i.replay.fen),O=S(()=>i.replay.last_move),y=S(()=>p.fen_pvs[$()]!==void 0),G=()=>p.game_result===void 0&&y();l(p.sans,p.cursor_path);const q=S(()=>i.replay.list.map(g=>{let C=p.fen_pvs[g.before_fen];if(C)return Si(C,g.uci)})),k=S(()=>i.replay.list.length<10),H=g=>{let C=S(()=>{let E=[],N=q();for(let I=g==="white"?10:11;I<N.length;I+=2)E.push(N[I]);return E}),R=S(()=>C().reduce((E,N)=>E+(N??0),0)),j=S(()=>{let E=[],N=C(),I=1;for(let W=0;W<N.length;W++){let X=N[W];if(X===void 0){E.push(E[E.length-1]??2);continue}X>0?(E.push(I),I++):(I=1,E.push(I))}return E}),ae=S(()=>j()[j().length-1]??0),be=S(()=>{let E=C(),N=j(),I=[];for(let W=0;W<E.length;W++){let X=E[W];X&&I.push(X*Sn(N[W]))}return I.reduce((W,X)=>W+X,0)}),we=S(ie(ae,(E,N)=>N===void 0?0:E-N)),Ie=()=>0,Fe=()=>0;return{get classic(){return R()},get streak(){return ae()},get combo(){return be()},get streak_delta(){return we()},get classic_delta(){return Ie()},get combo_delta(){return Fe()}}},L=g=>{if(!g)return;let[C,R]=g;if(!p.fen_pvs[C]&&(h("fen_pvs",C,R),C===$()&&lr(C)===m())){let j=Ci(R);v(s(j.uci)),Me()}};let M=ti();const V=(g,C)=>{g===0?M.play("hit0",!1,C):g<3?M.play("hit3",!1,C):g<5?M.play("hit5",!1,C):M.play("hit6",!1,C)};Ct(ie(q,(g,C)=>{if(!C||g.length!==C.length){let R=g[g.length-1],j=f()===(g.length%2===1?"white":"black");R!==void 0&&V(R,j?.8:.3)}}));const D=(g,C)=>{let R=g+C;{let j=Ht($()),ae=j.turn;j.board.get(er(g)).role==="pawn"&&(C[1]==="8"&&ae==="white"||C[1]==="1"&&ae==="black")&&(R+="q")}v(s(R)),Me()},Me=()=>{if(Xn($())){let g=["game-ended",Qn($())];h("game_result",g),je(ze()!==void 0)}else Jn($())?(h("game_result",["40-reached",void 0]),je(ze()!==void 0)):t($())},He=()=>{ir(()=>{h("color",$t(p.color)),h("game_result",void 0),h("nth",g=>g+1),h("sans",Pt([])),h("cursor_path",""),h("fen_pvs",Pt({})),l([],""),Me()})},$n=()=>{He()};let ft=Yn();const Pn=()=>{He(),ft("/")},Mn=()=>{He(),ft("/top")},xn=g=>{g>0?a():u()};Ct(ie(()=>{let g=e.pvs[$()];if(g)return[$(),g]},L));let pt=S(()=>H("white")),ht=S(()=>H("black")),xe=S(()=>f()==="white"?pt():ht()),[{leaderboard:ve},{add_top_score:An,add_top_combo:qn}]=kt();const[Re,Dn]=Q(""),[_e,gt]=Q(!1),We=S(()=>[Re(),xe().classic,Date.now()]),Ke=S(()=>[Re(),xe().combo,Date.now()]),mt=S(()=>{if(!p.game_result||p.game_result[1]!==f())return;let g=St(ve.top_scores,We());if(g!==-1)return g}),vt=S(()=>{if(!p.game_result||p.game_result[1]!==f())return;let g=St(ve.top_combos,Ke());if(g!==-1)return g});function _t(g,C,R){return g=g.slice(0),g.splice(C,0,R),g.pop(),g}const bt=S(()=>{let g=mt();if(g!==void 0)return _e()?ve.top_scores:_t(ve.top_scores,g,We())}),wt=S(()=>{let g=vt();if(g!==void 0)return _e()?ve.top_combos:_t(ve.top_combos,g,Ke())}),ze=S(()=>bt()||wt()),[Tn,je]=Q(!1),En=g=>{Dn(g)},Nn=()=>{An(We()),qn(Ke()),gt(!0)},[Ln,On]=Q(p.show_vote),Bn=()=>{je(!1),gt(!1)},Hn=()=>{h("show_vote",!1)},Rn=g=>{c(Re(),g),On(!1)};return Me(),(()=>{var g=ri(),C=g.firstChild,R=C.nextSibling,j=R.firstChild,ae=j.firstChild,be=ae.nextSibling;be.firstChild;var we=j.nextSibling,Ie=we.firstChild,Fe=we.nextSibling,E=Fe.firstChild,N=E.nextSibling,I=N.firstChild;I.nextSibling;var W=N.nextSibling,X=W.firstChild,Ge=W.nextSibling,Wn=Ge.nextSibling;return w(be,_,null),Zn(we,"wheel",To(xn)),w(Ie,b(Do,{get orientation(){return f()},get movable(){return G()},get color(){return f()},get fen(){return $()},get last_move(){return O()},play_orig_key:D})),w(N,b(U,{get when(){return o()},children:F=>(()=>{var ce=oi(),re=ce.firstChild,Ae=re.nextSibling;return Se(de=>(de=`${F()}%`)!=null?Ae.style.setProperty("width",de):Ae.style.removeProperty("width")),ce})()}),null),w(W,b($i,{onSetCursorPath:d,get cursor_path(){return i.replay.cursor_path},get steps(){return P()},get deltas(){return q()},get children(){return b(U,{get when(){return p.game_result},children:F=>b(ki,{get result(){return F()[0]},get top(){return ze()!==void 0},get win(){return F()[1]===f()},get score(){return xe().classic},get combo(){return xe().combo}})})}}),X),w(X,b(Bt,{get small(){return f()==="black"},flip:!0,get skip(){return k()},get scores(){return pt()}}),null),w(X,b(Bt,{get small(){return f()==="white"},flip:!1,get skip(){return k()},get scores(){return ht()}}),null),w(Ge,b(pe,{meet:!0,onClick:$n,children:"Restart"}),null),w(Ge,b(pe,{meet:!0,onClick:Pn,children:"Go Home"}),null),w(g,b(U,{get when(){return Tn()},get children(){var F=ni(),ce=F.firstChild,re=ce.firstChild,Ae=re.firstChild,de=Ae.nextSibling;return w(re,b(nt,{text:"Personal Best Achieved"}),de),w(re,b(U,{get when(){return _e()},get fallback(){return(()=>{var ue=ii();return ue.addEventListener("change",Nn),ue.$$input=Kn=>En(Kn.target.value),ue})()},get children(){return b(U,{get when(){return Ln()},get fallback(){return b(wi,{onBackToGame:Bn,onGoHighscores:Mn})},get children(){return b(yi,{onSkip:Hn,onClose:Rn})}})}}),de),w(de,b(U,{get when(){return bt()},children:ue=>b(Mt,{title:"Top Scores",get scores(){return ue()},get highlight(){return Xe(()=>!!_e())()?void 0:mt()}})}),null),w(de,b(U,{get when(){return wt()},children:ue=>b(Mt,{title:"Top Combo",get scores(){return ue()},get highlight(){return Xe(()=>!!_e())()?void 0:vt()}})}),null),F}}),null),Se(F=>{var ce=!y(),re=!!G();return ce!==F.e&&N.classList.toggle("turn",F.e=ce),re!==F.t&&Wn.classList.toggle("turn",F.t=re),F},{e:void 0,t:void 0}),g})()}function wi(e){return(()=>{var t=si(),n=t.firstChild;return w(n,b(pe,{get onClick(){return e.onGoHighscores},meet:!0,children:"See High Scores"}),null),w(n,b(pe,{get onClick(){return e.onBackToGame},draw:!0,children:"Back to Game"}),null),t})()}function yi(e){const t=n=>{n==="skip"&&e.onSkip(),e.onClose(n)};return(()=>{var n=ai(),r=n.firstChild,o=r.nextSibling;return w(o,b(pe,{onClick:()=>t("yes"),draw:!0,children:"Yes"}),null),w(o,b(pe,{onClick:()=>t("no"),draw:!0,meet:!0,children:"No"}),null),w(o,b(pe,{onClick:()=>t("skip"),gray:!0,get children(){return li()}}),null),n})()}function ki(e){return(()=>{var t=fi(),n=t.firstChild,r=n.nextSibling;return w(r,b(U,{get when(){return e.result==="40-reached"},children:"Move 40 reached."}),null),w(r,b(U,{get when(){return e.result==="game-ended"},children:"There has been a checkmate."}),null),w(t,b(U,{get when(){return e.win},get fallback(){return(()=>{var o=pi(),i=o.firstChild;return w(i,b(Xo,{text:"You lost"})),o})()},get children(){var o=ui(),i=o.firstChild,l=i.nextSibling,s=l.firstChild;s.firstChild;var d=s.nextSibling;return d.firstChild,w(i,b(Qo,{text:"You Win!"})),w(s,()=>e.score,null),w(d,()=>e.combo,null),w(o,b(U,{get when(){return e.top},get children(){var a=ci();return a.firstChild,w(a,b(nt,{text:"Personal Best Achieved."}),null),a}}),null),w(o,b(U,{when:!1,get children(){var a=di();return w(a,b(nt,{text:"Top Leaderboard Achieved."})),a}}),null),o}}),null),t})()}const Sn=e=>e>2?4:e>1?3:2;function Bt(e){const t=e.scores,n=S(ie(()=>e.scores.classic,f=>(setTimeout(()=>s(!1),200),f))),r=S(ie(()=>e.scores.streak,(f,m)=>(setTimeout(()=>a(!1),200),[f,m??2]))),o=S(ie(()=>e.scores.combo,f=>(setTimeout(()=>c(!1),200),f))),i=S(ie(()=>e.scores.streak,(f,m)=>(setTimeout(()=>h(!1),200),[f,m??2]))),[l,s]=Q(!1),[d,a]=Q(!1),[u,c]=Q(!1),[p,h]=Q(!1);te(()=>s(n()!==void 0)),te(()=>a(_(r()))),te(()=>c(o()!==void 0)),te(()=>h(v(i())));const _=f=>f[0]>f[1],v=f=>f[0]<f[1];return(()=>{var f=hi(),m=f.firstChild,P=m.nextSibling,$=P.firstChild;$.firstChild;var O=$.nextSibling;return w(m,()=>t.classic),w($,()=>Sn(t.streak),null),w(O,()=>t.combo),Se(y=>{var G=!!e.flip,q=!!e.small,k=!!e.skip,H=!!l(),L=!!e.skip,M=!!d(),V=!!p(),D=!!u();return G!==y.e&&f.classList.toggle("flip",y.e=G),q!==y.t&&f.classList.toggle("small",y.t=q),k!==y.a&&m.classList.toggle("skip",y.a=k),H!==y.o&&m.classList.toggle("bump",y.o=H),L!==y.i&&P.classList.toggle("skip",y.i=L),M!==y.n&&$.classList.toggle("bump",y.n=M),V!==y.s&&$.classList.toggle("shoot",y.s=V),D!==y.h&&O.classList.toggle("bump",y.h=D),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),f})()}function Ci(e){let t=e[0].cp;if(!t)return e[0];let n=e.filter(c=>c.cp&&Math.abs(c.cp)-Math.abs(t)<10),r=e.filter(c=>c.cp&&Math.abs(c.cp)-Math.abs(t)<20),o=e.filter(c=>c.cp&&Math.abs(c.cp)-Math.abs(t)<60),i=e.filter(c=>c.cp&&Math.abs(c.cp)-Math.abs(t)>=60),l=Ce(n),s=Ce(r),d=Ce(o),a=Ce(i),u=[];return l&&(u.push(l),u.push(l),u.push(l),u.push(l)),s&&(u.push(s),u.push(s),u.push(s)),d&&(u.push(d),u.push(d)),a&&(u.push(a),kn()&&(u.push(a),u.push(a),u.push(a))),Ce(u)}function Si(e,t){let n=e.findIndex(r=>r.uci===t);return n===-1?0:e.length-n-1}function $i(e){let t;te(()=>{let r=e.cursor_path,o=t.parentElement;if(!o)return;const i=t.querySelector(".on-path-end");if(!i){o.scrollTop=r.length>0?99999:0;return}let l=i.offsetTop-o.offsetHeight/2+i.offsetHeight;o.scrollTo({behavior:"smooth",top:l})});let n=tr(()=>e.children);return te(()=>{if(n()!==void 0){let r=t.parentElement;if(!r)return;r.scrollTop=99999;return}}),[(()=>{var r=gi(),o=r.firstChild,i=o.firstChild;return Rt(l=>{t=l},o),w(o,b(rr,{get each(){return e.steps},children:(l,s)=>b(Pi,nr(e,{get is_opening(){return s()<10},get delta(){return e.deltas[s()]},step:l}))}),i),w(o,n,null),r})(),mi()]}function Pi(e){const t=S(()=>e.delta),n=e.step,r=(s,d)=>d===void 0?"...":s?d:d===0?"0":`+${d}`,o=(s,d)=>d===void 0?"":i()?s?"opening":d>=5?"five":d>2?"four":d>0?"one":"zero":"",[i,l]=Q(!1);return setTimeout(()=>l(!0),100),(()=>{var s=vi(),d=s.firstChild,a=d.nextSibling,u=a.nextSibling,c=u.nextSibling,p=c.firstChild;return s.$$click=()=>e.onSetCursorPath(n.path),w(s,(()=>{var h=Xe(()=>n.ply%2===1);return()=>h()?Mi(n.ply):""})(),d),w(s,()=>n.san,a),w(c,()=>r(e.is_opening,t()),p),Se(h=>{var _=n.path===e.cursor_path,v={opening:e.is_opening,[o(e.is_opening,e.delta)]:!0};return _!==h.e&&s.classList.toggle("on-path-end",h.e=_),h.t=or(c,v,h.t),h},{e:void 0,t:void 0}),s})()}const Mi=e=>`${Math.ceil(e/2)}.`+(e%2===0?"..":"");sr(["input","click"]);export{_i as PERSIST_NAME_PLAY_SHOW_STATE,Di as default,Mi as ply_to_index};
